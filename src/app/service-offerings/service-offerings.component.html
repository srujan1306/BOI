<div class="container" (click)="clear_fieldmissing_error()">
  <table>
    <thead>
      <tr class="features_heading">
        <th class="features">Features</th>
        <th>
          <div class="package_headings">
            <h1>GOLD</h1>
            <div class="plan">$100/entity</div>
          </div>
        </th>
        <th>
          <div class="package_headings">
            <h1>DIAMOND</h1>
            <div class="plan">$250/entity</div>
          </div>
        </th>
        <th>
          <div class="package_headings">
            <h1>PLATINUM</h1>
            <div class="plan">$300/entity</div>
          </div>
        </th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td class="features">
          <ul>
            <li>Entry Update</li>
          </ul>
        </td>
        <td>No Update</td>
        <td>Update once</td>
        <td>Unlimited</td>
      </tr>
      <tr>
        <td class="features">
          <ul>
            <li>File report with FinCEN.</li>
          </ul>
        </td>
        <td><div class="check-mark"></div></td>
        <td><div class="check-mark"></div></td>
        <td><div class="check-mark"></div></td>
      </tr>
      <tr>
        <td class="features">
          <ul>
            <li>
              Automated, secure beneficial ownership information collection.
            </li>
          </ul>
        </td>
        <td></td>
        <td><div class="check-mark"></div></td>
        <td><div class="check-mark"></div></td>
      </tr>
      <tr>
        <td class="features">
          <ul>
            <li>Unlimited company and BOI data storage.</li>
          </ul>
        </td>
        <td></td>
        <td><div class="check-mark"></div></td>
        <td><div class="check-mark"></div></td>
      </tr>
      <tr>
        <td class="features">
          <ul>
            <li>Dashboard to manage BOI for all your entities.</li>
          </ul>
        </td>
        <td></td>
        <td><div class="check-mark"></div></td>
        <td><div class="check-mark"></div></td>
      </tr>
      <tr>
        <td class="features">
          <ul>
            <li>Connect beneficial owners to multiple entities.</li>
          </ul>
        </td>
        <td></td>
        <td><div class="check-mark"></div></td>
        <td><div class="check-mark"></div></td>
      </tr>
      <tr>
        <td class="features">
          <ul>
            <li>Unlimited, free Change of Information filings.</li>
          </ul>
        </td>
        <td></td>
        <td><div class="check-mark"></div></td>
        <td><div class="check-mark"></div></td>
      </tr>
      <tr>
        <td class="features">
          <ul>
            <li>Access to BOI Monitoring Services and filing reminders.</li>
          </ul>
        </td>
        <td></td>
        <td></td>
        <td><div class="check-mark"></div></td>
      </tr>
      <tr>
        <td class="features">
          <ul>
            <li>Priority customer support during the filing process.</li>
          </ul>
        </td>
        <td></td>
        <td></td>
        <td><div class="check-mark"></div></td>
      </tr>
      <tr>
        <td class="features">
          <ul>
            <li>Customised Cover Letter.</li>
          </ul>
        </td>
        <td></td>
        <td></td>
        <td><div class="check-mark"></div></td>
      </tr>
      <tr>
        <td class="features">
          <ul>
            <li>Customised Email to Beneficial Owners</li>
          </ul>
        </td>
        <td></td>
        <td></td>
        <td><div class="check-mark"></div></td>
      </tr>
      <tr>
        <td></td>
        <td>
          <button [disabled]="isLoading" (click)="prefill_package('GOLD')">
            Choose
          </button>
        </td>
        <td>
          <button [disabled]="isLoading" (click)="prefill_package('DIAMOND')">
            Choose
          </button>
        </td>
        <td>
          <button [disabled]="isLoading" (click)="prefill_package('PLATINUM')">
            Choose
          </button>
        </td>
      </tr>
    </tbody>
  </table>

  @if(isModalVisible){
  <div class="model_overlay">
    <div class="modal-container">
      <div class="modal-content">
        <div class="heading_close_bar">
          <h1>Flexible for You.</h1>
          <span class="close" (click)="closeModal()">&times;</span>
        </div>
        <form [formGroup]="newCustomerForm" (ngSubmit)="newCustomer()">
          <div class="form-container">
            <div class="form_field">
              <input
                type="text"
                placeholder="Full Name"
                formControlName="fullname"
                class="form_fields"
              />
            </div>
            <div class="validation_container">
              @if (fullname?.touched) { @if (fullname?.hasError('required')) {
              <div class="custom-error">Name is <strong>required</strong>.</div>
              } @if (fullname?.hasError('minlength')) {
              <div class="custom-error">
                Full Name is <strong>very short</strong>.
              </div>
              } }
            </div>
            <div class="form_field">
              <input
                type="text"
                class="form_fields"
                placeholder="Phone"
                formControlName="phone_number"
              />
            </div>
            <div class="validation_container">
              @if(phone_number?.touched){ @if
              (phone_number?.hasError('required')) {
              <div class="custom-error">
                Phone number is <strong>required</strong>.
              </div>
              } @if (phone_number?.hasError('pattern')) {
              <div class="custom-error">
                Phone number is <strong>invalid</strong>.
              </div>
              } }
            </div>
            <div class="form_field">
              <select class="form-select" formControlName="state" title="State">
                <option value="" disabled selected>State</option>
                @for(state of usaStates; track $index) {
                <option [value]="state">{{ state }}</option>
                }
              </select>
            </div>
            <div class="validation_container">
              @if (state?.touched) { @if (state?.hasError('required')) {
              <div class="custom-error">
                State is <strong>required</strong>.
              </div>
              }}
            </div>
            <div class="form_field">
              <input
                type="email"
                class="form_fields"
                placeholder="Email"
                formControlName="email"
              />
            </div>
            <div class="validation_container">
              @if(email?.touched) { @if(email?.hasError('required')) {
              <div class="custom-error">
                Email is <strong>required</strong>.
              </div>
              } @if (email?.hasError('email')) {
              <div class="custom-error">
                Please enter a <strong>valid email address.</strong>
              </div>
              } }
            </div>
            <div class="form_field">
              <input
                type="text"
                class="form_fields"
                placeholder="Company"
                formControlName="company"
              />
            </div>
            <div class="validation_container">
              @if (company?.touched) { @if (company?.hasError('required')) {
              <div class="custom-error">
                company is <strong>required</strong>.
              </div>
              }}
            </div>
            <input
              id="package"
              class="form_fields"
              formControlName="package"
              [value]="package"
              readonly
            />
            <div class="formfill_error_container">
              @if (errorMessage) {
              <div class="custom-error">{{ errorMessage }}</div>
              }
            </div>
            <button [disabled]="isLoading">
              @if(!isLoading){
              <span class="button-text">Book a Call</span>
              } @if (isLoading) {
              <span class="loader"></span>
              }
            </button>
            @if(showSuccess) {
            <div class="submission_success">
              <p>Your details are submitted successfully!</p>
            </div>
            }
            <div class="tagline">Save 40% on pocket and 100% on stress.</div>
          </div>
        </form>
      </div>
    </div>
  </div>
  }
</div>
